<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Rod Begbie :: Hiding referer spam in AWStats</title>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="Content-Style-Type" content="text/css" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script pagespeed_no_defer="" type="text/javascript" src="//use.typekit.net/oar7yon.js"></script>
    <script pagespeed_no_defer="" type="text/javascript">try{Typekit.load();}catch(e){}</script>
    <link href="/bootstrap/css/bootstrap.css" rel="stylesheet" media="screen">
    <link href="/fontawesome/css/font-awesome.css" rel="stylesheet" media="screen">
    <script src="/bootstrap/js/jquery-1.8.3.js"></script>
    <script src="/bootstrap/js/bootstrap.js"></script>
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
    </style>
    <link href="/bootstrap/css/bootstrap-responsive.css" rel="stylesheet" media="screen">



</head>
<body>
   <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="brand" href="http://begbie.com/">Rod Begbie</a>
        </div>
      </div>
    </div>

    <div class="container">

    <h1>I am the ghost of groovymother.com. Woooooo!</h1>

    <div class="row">
        <div class="span12">
          <div class="alert">
            <p>This is an old page from <a href="http://begbie.com/">Rod Begbie</a>'s blog.</p>

            <p>It only exists in an attempt
                to prevent linkrot. No new content will be added to this site, and links and images are liable to be broken.  Check out <a href="http://begbie.com/">begbie.com</a>
                to find where I'm posting stuff these days.
            </p>
          </div>
        </div>
    </div>


    <div class="row">
        <div class="span12">
            
            
        </div>
    </div>

    <div class="row">
        <div class="span12">
            <h2>Hiding referer spam in AWStats</h2>
                
    



<h3 class="date"><a href="/2005/jan/21/">&#x27a0;</a> January 21, 2005</h3>


<div class="row">
    <div class="span12">


    
    <div class="postentry entry">
        
        <a name="001643"></a>
        
        <h4>Hiding referer spam in AWStats</h4>
        <p>Inspired by <a href="http://www.juju.org/archives/2005/01/21/derefspam" title="juju d0t org &#194;&#187; Blog Archive &#194;&#187; derefspam.pl - Use MT-Blacklist rules to remove referral spam">derefspam.pl</a>, and my own <a href="http://groovymother.com/archives/2005/01/12/mod_refererblack.html" title="&#226;&#128;&#156;groovy mother&#226;&#128;&#157; :: mod_refererblacklist?">issues with referer spam</a>, I&#8217;ve hacked together a patch to <a href="http://awstats.sourceforge.net/">AWStats(AWStats &#8211; Free log file analyzer for advanced statistics (GNU <span class="caps">GPL</span>).)</a> which will cause it to ignore referer URLs which match the <a href="http://www.jayallen.org/comment_spam/blacklist.txt" title="MT-Blacklist/Comment Spam Clearinghouse">MT-Blacklist Comment Spam blacklist</a>.</p>

<p>Grab the patch from <a href="http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1106935&amp;group_id=13764&amp;atid=313764" title="SourceForge.net: 1106935 - Check Comment Spam blacklist for referer-spam">SourceForge</a>.</p>

<p>(AWStats users might also be interested in my other two patches, which allow it to report <span class="caps">RSS</span> readers: <a href="http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1106894&amp;group_id=13764&amp;atid=313764" title="SourceForge.net: Modify: 1106894 - Browsers.pm update: RSS client recognition">Patch 1</a>, <a href="http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1097963&amp;group_id=13764&amp;atid=313764" title="SourceForge.net: Modify: 1097963 - Adding centralised RSS robots to robots.pm">Patch 2</a>)</p>
        <div class="row-fluid">
            <div class="span10">
                
            </div>
            <div class="span2" style="text-align: right;">
                <a href="/2005/jan/21/hiding_referer/#comments">8 comments</a> |
                <a rel="bookmark" href="/2005/jan/21/hiding_referer/" title="Permanent link to this entry">&#x2732;</a>
            </div>
        </div>
    </div>



</div>
</div>

    

    
        <hr>
        <h3 id="comments">Comments</h3>

        
            <div class="comment_odd" id="c46">
                <h4>On Friday, January 21, 2005,
                    <a href="http://virtuelvis.com/">
                    Arve</a>
                    commented:
                </h4>
                <p>Which version of AWStats are these patches for? I am currently running 6.3, and would hate to see stuff break if I run these.</p>

<p>(As for your RSS reader patch: It misses Opera 7.5 and up in news aggregator mode, since Opera&#39;s User Agent string says nothing about it being an aggregator.)</p>
            </div>
        
            <div class="comment_even" id="c45">
                <h4>On Friday, January 21, 2005,
                    <a href="http://groovymother.com/">
                    Rod</a>
                    commented:
                </h4>
                <p>They were made from AWStats 6.2, but they&#39;re universal diffs, so they should apply cleanly to 6.3.  If not, just patch -R them to revert.</p>

<p>The RSS patch doesn&#39;t recognise Opera&#39;s RSS reading specifically, but neither does it recognise Firefox&#39;s &quot;Live Bookmarks&quot;.  I think this is fair, since they&#39;re the same User Agent.</p>
            </div>
        
            <div class="comment_odd" id="c47">
                <h4>On Saturday, January 22, 2005,
                    <a href="http://www.jesustribe.org/blog">
                    Michael Paul</a>
                    commented:
                </h4>
                <p>Nice Rod. I&#39;m so tired of sifting thru Referer&#39;s for legit site visits. Downloaded the patch but have yet to set it up. The instructions on Sourceforge are petty minimal. Maybe its that simple. I did have a few questions.</p>

<p>Where does the patch go? Is it a script that I need to run a cronjob for, or does the config run it when you add the extra line in it?</p>

<p>1) Get the latest blacklist.txt from<br /><a href="http://www.jayallen.org/comment_spam/" rel="nofollow">http://www.jayallen.org/comment_spam/</a> (You might want<br />to make this a cronjob)</p>

<p>My blacklist seems to update itself. At least I see it updating either daily or weekly. Of course there are my own additions that I&#39;ve built over time. Can I just keep the current list?</p>

<p>2) Edit your awstats.?.conf file to include the line<br />RefererBlacklist=&quot;/path/to/blacklist.txt&quot; </p>

<p>Soon as I know what to do with it I&#39;ll try it out.</p>
            </div>
        
            <div class="comment_even" id="c39">
                <h4>On Monday, January 31, 2005,
                    
                    David
                    commented:
                </h4>
                <p>Looks like just what we need, but I can&#39;t figure out how to install the patch.<br />Apologies for my ignorance -- I did look all through the AWStats site and forums, and Googled until my eyes were sore.</p>
            </div>
        
            <div class="comment_odd" id="c44">
                <h4>On Monday, February 7, 2005,
                    <a href="http://www.sumbler.com/blog/">
                    ktpupp</a>
                    commented:
                </h4>
                <p>I&#39;m stuck at this point:</p>

<p>2) Edit your awstats.?.conf file to include the line<br />RefererBlacklist=&quot;/path/to/blacklist.txt&quot;</p>

<p>Where do I find this .conf file, and how do I enter this line?  I found an awstats.model.conf file, is this the one? I opened it in notepad and it was a lot of code that I didn&#39;t dare add to for fear of breaking it!</p>

<p>I&#39;m being slammed with awful referer spam and would love to get them out of my stats!</p>

<p> -=kt=-</p>
            </div>
        
            <div class="comment_even" id="c42">
                <h4>On Tuesday, February 15, 2005,
                    <a href="http://markus.schoepke.at">
                    Markus</a>
                    commented:
                </h4>
                <p>Michael Paul, I&#39;ve got the same problem as you. I can&#39;t find any instructions on how to use this patch.</p>
            </div>
        
            <div class="comment_odd" id="c43">
                <h4>On Tuesday, February 15, 2005,
                    <a href="http://groovymother.com/">
                    Rod</a>
                    commented:
                </h4>
                <p>You apply the patch using the standard GNU patch tool.  If this is outside your realm of experience, then this patch might not be for you.</p>
            </div>
        
            <div class="comment_even" id="c41">
                <h4>On Wednesday, February 16, 2005,
                    <a href="http://www.sumbler.com/blog/">
                    ktpupp</a>
                    commented:
                </h4>
                <p>I saw on another site that I could just copy the text of the patch into the awstats.pl file since I can&#39;t install the patch from a command prompt in Windows.  Is this true?  If so, what needs to be copied and where should it be placed?</p>

<p>I really need this to work because my stats are worthless to me if I have to wade through thousands of junk referals and porn searches that are filling my logs/stats.</p>

<p>I&#39;d really appreciate some help as I was not able to get any from the forum at the SourceForge page...  Thanks!</p>

<p> -=kt=-</p>
            </div>
        

    


        </div>
    </div>


    <div class="row">
        <div class="span12">
            
    
        <div align="center">
<script type="text/javascript"><!--
google_ad_client = "pub-8431319264174931";
/* Leaderboard for GroovyMother */
google_ad_slot = "3813014872";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
    

        </div>
    </div>

    <hr>

    <div class="row">
        <div class="span4">
            
            <h4>About This Site</h4>

<p>
This is an archive of groovmother.com, the old blog run by
<strong>Rod Begbie</strong> &mdash; A Scottish geek who lives in San Francisco, CA.</p>

<p>I'm the co-founder of <a href="http://sosh.com/">Sōsh</a>, your handy-dandy guide for <a href="http://sosh.com/">things to do in San Francisco this weekend</a>.</p>

<ul>
    <li><a href="http://begbie.com/">About Rod</a></li>
    <li><a href="/about/contact/">Contact Rod</a></li>
    <li><a href="/about/oaq/">Occasionally Asked Questions</a></li>
</ul>

            
        </div>
        <div class="span4">
            
            
            
        </div>
        <div class="span4">
            
            <h4>Powered By</h4>

<ul>
    <li><a href="http://www.djangoproject.com/">Django</a></li>
    <li><a href="http://nginx.net/">nginx</a></li>
    <li><a href="http://www.python.org/">Python</a></li>
    <li><a href="http://typekit.com/colophons/oar7yon">Typekit</a></li>
    <li><a href="http://www.vpslink.com/?ref=MGSB0S">VPSLink</a></li>
</ul>

            
        </div>
    </div>

</div>

</body>
</html>
